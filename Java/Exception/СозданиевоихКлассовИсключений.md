# Создание своих классов исключений

Чтобы создать свой класс исключений, надо унаследовать его от класса `Exception`. 

Например, мы напишем метод для обработки только текстовых файлов, поэтому мы можем написать свой класс исключений и передавать соответствующий код ошибки, когда кто-то передает неподходящий тип файла в качестве входных данных.

Пример своего класса исключений и его использование:

```Java
public class MyException extends Exception {
 
    private String errorCode = "Unknown_Exception";
     
    public MyException(String message, String errorCode){
        super(message);
        this.errorCode = errorCode;
    }
     
    public String getErrorCode(){
        return this.errorCode;
    }
}
```

Теперь проверим в работе наш класс `MyException`:

```Java
public class CustomExceptionExample {
 
    public static void main() throws MyException {
        try {
            processFile("file.txt");
        } catch (MyException e) {
            processErrorCodes(e);
        }  
    }
 
    private static void processErrorCodes(MyException e) throws MyException {
        // здесь мы ищем указанный при выбросе исключения код ошибки и сообщаем пользователю что произошло
        switch(e.getErrorCode()){
            case "BAD_FILE_TYPE":
                System.out.println("Неподходящий тип файла");
                throw e;
            case "FILE_NOT_FOUND_EXCEPTION":
                System.out.println("Файл не найден");
                throw e;
            case "FILE_CLOSE_EXCEPTION":
                System.out.println("Ошибка при закрытии файла");
                break;
            default:
                System.out.println("Произошла неизвестная ошибка " + e.getMessage());
                e.printStackTrace();
        }
    }
 
    // метод для работы с файлом, который пробрасывает наш тип исключений
    private static void processFile(String file) throws MyException {       
        InputStream fis = null;
        try {
            fis = new FileInputStream(file);
        } 
        catch (FileNotFoundException e) {
            throw new MyException(e.getMessage(),"FILE_NOT_FOUND_EXCEPTION");
        }finally {
            try {
                if(fis != null) fis.close();
            } catch (IOException e) {
                throw new MyException(e.getMessage(),"FILE_CLOSE_EXCEPTION");
            }
        }
    }
}
```

### Советы!

1. Не используйте для перехвата исключений класс `Exception`. В иерархии исключений есть множество классов на все случаи жизни вашей программы, которые не только эффективно обработают конкретную ошибку, но и предоставят полезную для пользователя и отладки информацию.
2. Бросайте исключение как можно раньше. Это является хорошей практикой программирования на Java.
3. Ловите исключения только тогда, когда сможете эффективно для пользователя и отладки их обработать.
4. Освобождайте ресурсы. Перехватывая исключение всегда закрывайте открытые ресурсы. Еще проще и эффективнее это делать с Java 7. Используйте `try` с ресурсами для лаконичного и красивого кода.
5. Логируйте исключения. Логируйте сообщения, которые предоставляет исключение. В большинстве случаев это даст вам четкое понимание причин и поможет в отладке. Не оставляйте пустым блок `catch`, иначе он будет просто поглощать исключение без каких-либо значимых деталей для отладки.
6. Один `catch` для нескольких исключений.
7. Используйте свои исключения. Это позволит вам лучше чувствовать свою программу и эффективнее с ней работать.
8. Соглашения об именовании. Когда вы создать свои классы исключений, следите за тем, что из самого названия класса будет ясно, что это исключение.
9. Используйте исключения с умом. Бросить исключение — достаточно дорогостоящая в Java операция. Возможно, в некоторых случаях будем уместно не бросать исключений, а вернуть, например, логическую переменную, которая обозначала успешное или не успешное выполнение метода.
10. Документируйте исключения. Желательно писать javadoc @throws для ваших исключений. Это будет особенно полезно в тех случаях, когда ваша программа предоставляет интерфейс для работы с другими приложениями.


[Вернуться назад](../../README.md)

